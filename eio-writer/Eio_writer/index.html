<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Eio_writer (eio-writer.Eio_writer)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">eio-writer</a> &#x00BB; Eio_writer</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Eio_writer</span></code></h1><p>Writing to a <code>Eio.Buf_write.t</code> with an api that resembles <code>Stdio</code> or <code>Async.Writer</code>.</p></header><nav class="odoc-toc"><ul><li><a href="#async-writer-style-api">Async writer style API</a></li><li><a href="#stdio-style-api">Stdio style API</a><ul><li><a href="#format">Format</a></li><li><a href="#sexp">Sexp</a></li></ul></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="xref-unresolved">Eio</span>.Buf_write.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_flow"><a href="#val-with_flow" class="anchor"></a><code><span><span class="keyword">val</span> with_flow : <span><span class="optlabel">?initial_size</span>:<span class="xref-unresolved">Base</span>.int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">_</span> <span class="xref-unresolved">Eio</span>.Flow.sink</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <code>Eio.Buf_write.with_flow</code>.</p></div></div><h2 id="async-writer-style-api"><a href="#async-writer-style-api" class="anchor"></a>Async writer style API</h2><p>In this API, the emphasis is put on the prefix &quot;write&quot;, rather than &quot;print&quot;. &quot;Print&quot; sounds a bit like this is printing to the screen or the terminal, so it is reserved to the part of the API that prints to the standard channels (see below).</p><div class="odoc-spec"><div class="spec value anchored" id="val-write_string"><a href="#val-write_string" class="anchor"></a><code><span><span class="keyword">val</span> write_string : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?pos</span>:<span class="xref-unresolved">Base</span>.int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?len</span>:<span class="xref-unresolved">Base</span>.int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_newline"><a href="#val-write_newline" class="anchor"></a><code><span><span class="keyword">val</span> write_newline : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_line"><a href="#val-write_line" class="anchor"></a><code><span><span class="keyword">val</span> write_line : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_lines"><a href="#val-write_lines" class="anchor"></a><code><span><span class="keyword">val</span> write_lines : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Base</span>.string <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_sexp"><a href="#val-write_sexp" class="anchor"></a><code><span><span class="keyword">val</span> write_sexp : <span><span class="optlabel">?mach</span>:<span class="xref-unresolved">Base</span>.bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>Write a sexp followed by a newline character. Default to <code>mach:false</code>, which means uses <code>Sexp.to_string_hum</code> by default.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-writef"><a href="#val-writef" class="anchor"></a><code><span><span class="keyword">val</span> writef : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, <span class="xref-unresolved">Base</span>.unit)</span> <span class="xref-unresolved">Base</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flush"><a href="#val-flush" class="anchor"></a><code><span><span class="keyword">val</span> flush : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div></div><h2 id="stdio-style-api"><a href="#stdio-style-api" class="anchor"></a>Stdio style API</h2><p>There are cases where just need to print a quick statement to stdout or stderr, and going through building a complete call to <a href="#val-with_flow"><code>with_flow</code></a> feels too heavy. We assume that these functions are primarily useful in context where you have access to the eio env. The name exposed below are derived from OCaml's stdlib, and are good candidate for easily migrating some code.</p><div class="odoc-spec"><div class="spec value anchored" id="val-print_string"><a href="#val-print_string" class="anchor"></a><code><span><span class="keyword">val</span> print_string : 
  <span><span class="label">env</span>:<span>&lt; stdout : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_endline"><a href="#val-print_endline" class="anchor"></a><code><span><span class="keyword">val</span> print_endline : 
  <span><span class="label">env</span>:<span>&lt; stdout : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_newline"><a href="#val-print_newline" class="anchor"></a><code><span><span class="keyword">val</span> print_newline : 
  <span><span class="label">env</span>:<span>&lt; stdout : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_lines"><a href="#val-print_lines" class="anchor"></a><code><span><span class="keyword">val</span> print_lines : 
  <span><span class="label">env</span>:<span>&lt; stdout : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Base</span>.string <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>Write all strings in the order supplied to stdout, each followed by a newline char.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prerr_string"><a href="#val-prerr_string" class="anchor"></a><code><span><span class="keyword">val</span> prerr_string : 
  <span><span class="label">env</span>:<span>&lt; stderr : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prerr_endline"><a href="#val-prerr_endline" class="anchor"></a><code><span><span class="keyword">val</span> prerr_endline : 
  <span><span class="label">env</span>:<span>&lt; stderr : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prerr_newline"><a href="#val-prerr_newline" class="anchor"></a><code><span><span class="keyword">val</span> prerr_newline : 
  <span><span class="label">env</span>:<span>&lt; stderr : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div></div><h3 id="format"><a href="#format" class="anchor"></a>Format</h3><div class="odoc-spec"><div class="spec value anchored" id="val-printf"><a href="#val-printf" class="anchor"></a><code><span><span class="keyword">val</span> printf : 
  <span><span class="label">env</span>:<span>&lt; stdout : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Base</span>.unit, <span class="xref-unresolved">Base</span>.string, <span class="xref-unresolved">Base</span>.unit)</span> <span class="xref-unresolved">Base</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-aprintf"><a href="#val-aprintf" class="anchor"></a><code><span><span class="keyword">val</span> aprintf : 
  <span><span class="label">env</span>:<span>&lt; stdout : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, <span class="xref-unresolved">Base</span>.unit)</span> <span class="xref-unresolved">Base</span>.format</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-eprintf"><a href="#val-eprintf" class="anchor"></a><code><span><span class="keyword">val</span> eprintf : 
  <span><span class="label">env</span>:<span>&lt; stderr : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Base</span>.unit, <span class="xref-unresolved">Base</span>.string, <span class="xref-unresolved">Base</span>.unit)</span> <span class="xref-unresolved">Base</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><h3 id="sexp"><a href="#sexp" class="anchor"></a>Sexp</h3><div class="odoc-spec"><div class="spec value anchored" id="val-print_sexp"><a href="#val-print_sexp" class="anchor"></a><code><span><span class="keyword">val</span> print_sexp : 
  <span><span class="label">env</span>:<span>&lt; stdout : <span><span>[&gt; <span class="xref-unresolved">Eio</span>.Flow.sink_ty ]</span> <span class="xref-unresolved">Eio</span>.Resource.t</span>.. &gt;</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mach</span>:<span class="xref-unresolved">Base</span>.bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>Print a sexp followed by a newline character. See <code>Stdio.print_s</code>. Default to <code>mach:false</code>, which means uses <code>Sexp.to_string_hum</code> by default.</p></div></div></div></body></html>
